"use strict";angular.module("appApp",["ngCookies","ngResource","ngSanitize","ngRoute","btford.socket-io"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).value("nickName","anonymous"),angular.module("appApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("appApp").controller("SocketCtrl",["$log","$scope","chatSocket","messageFormatter","nickName",function(a,b,c,d,e){b.nickName=e,b.messageLog="Ready to chat!",b.sendMessage=function(){var f=b.message.match("^/nick (.*)");if(angular.isDefined(f)&&angular.isArray(f)&&2===f.length){var g=e;e=f[1],b.message="",b.messageLog=d(new Date,e,"nickname changed - from "+g+" to "+e+"!")+b.messageLog,b.nickName=e}a.debug("sending message",b.message),c.emit("message",e,b.message),b.message=""},b.$on("socket:broadcast",function(c,e){return a.debug("got a message",c.name),e.payload?void b.$apply(function(){b.messageLog=d(new Date,e.source,e.payload)+b.messageLog,b.message=""}):void a.error("invalid message","event",c,"data",JSON.stringify(e))})}]),angular.module("appApp").factory("chatSocket",["socketFactory",function(a){var b=a();return b.forward("broadcast"),b}]),angular.module("appApp").controller("NickCtrl",["$scope","nickName",function(a,b){a.nickName=b}]),angular.module("appApp").value("messageFormatter",function(a,b,c){return a.toLocaleTimeString()+" - "+b+" - "+c+"\n"});